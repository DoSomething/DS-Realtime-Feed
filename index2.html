<!DOCTYPE html>
<html>

  <head>
    <link rel="stylesheet" href="/css/animate.css">
    <style>

      body {
        background-color: white;
        width: 100%;
        height: 100%;
        display: block;
      }

      .container {
        border: 1px solid black;
        width: 1172px;
        height: 717px;
        top: 0;
        left: 0;
        position: absolute;
        display: block;
      }

      .box {
        height: 20%;
        width: 12.5%;
        display: inline-block;
        margin: .5%;
        text-align: center;
        float: left;
      }

      .box-style-1 {
        background-color: #23b7fb;
        color: #FFFFFF;
      }

      .box-style-2 {
        background-color: #4e2b63;
        color: #fed100;
      }

      .box-style-3 {
        background-color: #fed100;
        color: #4e2b63;
      }

    </style>
  </head>

  <body>

    <div class="container">

    </div>
    <script src="/js/jquery-1.11.0.min.js"></script>
    <script src="http://localhost:3000/socket.io/socket.io.js"></script>

    <script>

      var socket = io.connect('http://localhost:3000');
      socket.on('message', function(text){
        var element = $('.box')[getRandomInt(0, $('.box').length)];
        $(element).addClass('animated flipInX');
        $(element).text(text);
        $(element).one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){
          $(element).val(getRandomBox(text));
          $(element).text(text);
          $(element).removeClass('flipInX');
        });
      });

      $(document).ready(function(){
        for(var index = 0; index < (7 * 4); index++){
          $('.container').append(getRandomBox("derp"));
        }
      });

      function getRandomBox(text){
        var random = Math.random();
        if(random >= 0.7){
          return '<div class="box box-style-1">' + text + '</div>';
        }
        else if(random >= 0.4){
          return '<div class="box box-style-2">' + text + '</div>';
        }
        else{
          return '<div class="box box-style-3">' + text + '</div>';
        }
      }

      function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }

    </script>
  </body>

</html>
